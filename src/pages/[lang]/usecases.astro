---
import BaseLayout from "@/layouts/BaseLayout.astro";
import Section from "@/components/ui/Section.astro";
import Button from "@/components/ui/Button.astro";
import UseCaseTabs from "@/components/react/UseCaseTabs";
import { Image } from "astro:assets";
import {
  getLangFromUrl,
  useTranslations,
  getStaticPaths as getI18nPaths,
  getLocalizedPath,
} from "@/i18n/utils";
// 2. 导出给 Astro 用
export const getStaticPaths = getI18nPaths;

import heroBgImg from "@/assets/frnh/PremiumHeroImage1.jpg";
import ctaBgImg from "@/assets/施工案例/微信图片_20251210110122_458_4.png";
import { getAllData } from "@/data/usecases/index"; // 确保数据被打包
// 2. 获取当前语言参数
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const useCasesData = getAllData(lang);
---

<BaseLayout title="Construction Case - Industry Solutions" lang={lang}>
  <!-- Hero Section -->
  <section
    class="relative h-[70vh] min-h-[500px] flex items-center overflow-hidden"
  >
    <!-- Background Image with Overlay -->
    <div class="absolute inset-0">
      <Image
        src={heroBgImg}
        alt="Industry solutions and construction case"
        class="w-full h-full object-cover"
        width={2070}
        height={1380}
      />
      <div
        class="absolute inset-0 bg-linear-to-r from-slate-900/95 via-slate-900/80 to-slate-900/50"
      >
      </div>
    </div>

    <!-- Content -->
    <div class="container mx-auto relative z-10 px-4 sm:px-6 lg:px-8">
      <div class="max-w-4xl mx-auto text-center">
        <div
          class="inline-flex items-center px-4 py-2 mb-6 bg-linear-to-r from-blue-600 to-teal-600 text-white text-sm font-semibold rounded-full shadow-lg"
        >
          <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
            <path
              fill-rule="evenodd"
              d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z"
              clip-rule="evenodd"></path>
          </svg>
          {t("usecase.solutions")}
        </div>

        <h1
          class="text-4xl md:text-6xl lg:text-7xl font-bold text-white mb-6 leading-tight"
        >
          <span
            class="text-transparent bg-clip-text bg-linear-to-r from-blue-400 via-teal-400 to-blue-400"
          >
            {t("nav.useCases")}
          </span>
        </h1>

        <p
          class="text-xl md:text-2xl text-slate-200 mb-8 max-w-3xl mx-auto leading-relaxed"
        >
          {t("usecase.description")}
        </p>
      </div>
    </div>
  </section>

  <!-- Use Cases with Tabs -->
  <Section background="gray">
    <!-- <UseCaseTabs useCases={useCases} client:load /> -->
    {
      useCasesData.map((useCase) => (
        <div class="mb-16">
          {/* <h2 class="text-3xl md:text-4xl font-bold text-slate-900 mb-6 text-center">
          {useCase.industry}
        </h2> */}
          <div class="bg-white rounded-2xl border border-gray-200 shadow-xl overflow-hidden hover:shadow-2xl transition-all duration-300 ">
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-20">
              {useCase.results.map((result:any) => (
                <div class="lg:col-span-6 relative h-64 lg:h-auto overflow-hidden group m-5">
                  <img
                    src={result.img.src}
                    alt={useCase.industry}
                    class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"
                    loading="lazy"
                  />

                  <div class="absolute inset-0 bg-linear-to-t from-slate-900/80 via-slate-900/40 to-transparent" />

                  <div class="absolute bottom-0 left-0 right-0 p-6 text-white">
                    <h2 class="text-2xl md:text-3xl font-bold mb-2">
                      {result.title}
                    </h2>
                  </div>
                </div>
              ))}
            </div>
          </div>
        </div>
      ))
    }
  </Section>
</BaseLayout>
